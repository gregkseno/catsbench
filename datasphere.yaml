name: benchmark
desc: Train CSBM on synthetic benchmark dataset
cmd: >
  python -m src.run -m \
    paths.data_dir="${DS_PROJECT_HOME}/data" seed=1 \
    hydra/launcher=joblib hydra.launcher.n_jobs=4 hydra.launcher.backend=loky \
    experiment=csbm/benchmark/d2_g002_t63_kl,csbm/benchmark/d2_g002_t63_mse,csbm/benchmark/d2_g002_t15_kl,csbm/benchmark/d2_g002_t15_mse
env:
  python:
    type: manual
    version: 3.12
    pip:
      index-url: https://pypi.org/simple
      extra-index-urls:
        - https://download.pytorch.org/whl/cu124
    requirements-file: requirements.txt
    # vars:
    # - PIP_NO_BUILD_ISOLATION: "1"
flags:
  - attach-project-disk
cloud-instance-type: g2.1
